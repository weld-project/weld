language: rust
sudo: required
dist: trusty
before_install:
- sudo -E apt-add-repository -y "ppa:deadsnakes/ppa"
- curl -sSL "https://apt.llvm.org/llvm-snapshot.gpg.key" | sudo -E apt-key add -
- echo "deb http://apt.llvm.org/trusty/ llvm-toolchain-trusty-6.0 main" | sudo tee -a /etc/apt/sources.list >/dev/null
- curl -sSL "https://build.travis-ci.org/files/gpg/travis-security.asc" | sudo -E apt-key add -
- echo "deb http://ppa.launchpad.net/ubuntu-toolchain-r/test/ubuntu trusty main" | sudo tee -a /etc/apt/sources.list >/dev/null
install:
- rustup component add rustfmt
- rustup component add clippy
- sudo rm -f `which llvm-config`
- export WELD_HOME=`pwd`
- sudo -E apt-get -yq update &>> ~/apt-get-update.log
- sudo -E apt-get --no-install-suggests --no-install-recommends -qy --allow-unauthenticated install libssl-dev gcc make llvm-6.0 llvm-6.0-dev clang-6.0 lib32z1-dev python3.7
- PATH=$PATH:/home/travis/.cargo/bin
script:
- bash -e -x .travis/test_multi_version.sh 6.0 60.0.3 3.7
